<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZippUp - Service Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1e293b;
        }

        .hidden { display: none !important; }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .app-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            animation: bounce 1.5s infinite;
            margin-bottom: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-30px,0); }
            70% { transform: translate3d(0,-15px,0); }
            90% { transform: translate3d(0,-4px,0); }
        }

        .splash-text {
            color: white;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .splash-subtitle {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
        }

        /* Auth Screen */
        .auth-screen {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            align-items: center;
            justify-content: center;
        }

        .auth-container {
            background: white;
            padding: 40px 30px;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .auth-logo .logo {
            width: 80px;
            height: 80px;
            background: #2563eb;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 16px;
        }

        .auth-title {
            font-size: 1.75rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 8px;
        }

        .auth-subtitle {
            color: #64748b;
            text-align: center;
            margin-bottom: 32px;
        }

        .input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            margin-bottom: 16px;
        }

        .input:focus {
            border-color: #2563eb;
        }

        .btn {
            width: 100%;
            padding: 12px 24px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            margin-bottom: 12px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #2563eb;
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
        }

        .btn-secondary {
            background: white;
            color: #2563eb;
            border: 2px solid #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: #64748b;
        }

        .auth-switch a {
            color: #2563eb;
            text-decoration: none;
            font-weight: 600;
        }

        /* Main App */
        .app {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .header {
            background: white;
            padding: 20px;
            margin: 0 0 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .user-info h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .user-location {
            color: #64748b;
            font-size: 0.875rem;
        }

        .logout-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .search-box {
            display: flex;
            background: #f8fafc;
            border-radius: 12px;
            padding: 4px;
            border: 2px solid #e2e8f0;
        }

        .search-input {
            flex: 1;
            border: none;
            outline: none;
            padding: 12px 16px;
            background: transparent;
            font-size: 1rem;
        }

        .voice-btn {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            background: #2563eb;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
        }

        .emergency-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            margin: 0 20px 20px 20px;
            cursor: pointer;
            box-shadow: 0 4px 14px rgba(239, 68, 68, 0.4);
        }

        .content {
            padding: 0 20px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 32px;
        }

        .quick-action {
            background: white;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .quick-action:hover {
            transform: translateY(-2px);
        }

        .quick-action-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .services {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .service-card {
            background: white;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .service-card:hover {
            transform: translateY(-2px);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        .service-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .service-description {
            color: #64748b;
            font-size: 0.875rem;
            margin-bottom: 8px;
        }

        .service-price {
            color: #2563eb;
            font-weight: 600;
        }

        /* Booking Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .modal-icon {
            font-size: 3rem;
            margin-right: 16px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
        }

        /* Booking Type Selection */
        .booking-type-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .booking-type-btn {
            flex: 1;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .booking-type-btn.active {
            border-color: #2563eb;
            background: #eff6ff;
            color: #2563eb;
        }

        .booking-type-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .booking-type-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .booking-type-desc {
            font-size: 0.75rem;
            color: #64748b;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
        }

        /* Transport-specific styles */
        .location-inputs {
            margin-bottom: 20px;
        }

        .location-input-group {
            position: relative;
            margin-bottom: 12px;
        }

        .location-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .location-input {
            padding-left: 44px;
        }

        .price-estimate {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            text-align: center;
        }

        .price-range {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0ea5e9;
            margin-bottom: 4px;
        }

        .price-note {
            font-size: 0.875rem;
            color: #64748b;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e2e8f0;
            display: flex;
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 4px;
            background: none;
            border: none;
            cursor: pointer;
            color: #64748b;
        }

        .nav-item.active {
            color: #2563eb;
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            max-width: 300px;
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { background: #10b981; }
        .notification.error { background: #ef4444; }
        .notification.info { background: #06b6d4; }

        @media (max-width: 480px) {
            .content { padding: 0 16px; }
            .emergency-btn { margin: 0 16px 20px 16px; }
            .form-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="app-logo">üöÄ</div>
        <div class="splash-text">ZippUp</div>
        <div class="splash-subtitle">Service Platform</div>
    </div>

    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="logo">üöÄ</div>
            </div>
            
            <div id="login-form">
                <h2 class="auth-title">Welcome to ZippUp</h2>
                <p class="auth-subtitle">Sign in to continue</p>
                
                <input type="text" id="login-email" class="input" placeholder="Email or Phone">
                <input type="password" id="login-password" class="input" placeholder="Password">
                
                <button id="login-btn" class="btn btn-primary">Sign In</button>
                <button id="demo-login-btn" class="btn btn-secondary">Demo Login (Skip)</button>
                
                <div class="auth-switch">
                    Don't have an account? <a href="#" id="show-register">Create Account</a>
                </div>
            </div>

            <div id="register-form" class="hidden">
                <h2 class="auth-title">Create Account</h2>
                <p class="auth-subtitle">Join ZippUp today</p>
                
                <input type="text" id="register-name" class="input" placeholder="Full Name">
                <input type="email" id="register-email" class="input" placeholder="Email">
                <input type="tel" id="register-phone" class="input" placeholder="Phone Number">
                <input type="password" id="register-password" class="input" placeholder="Password">
                
                <button id="register-btn" class="btn btn-primary">Create Account</button>
                
                <div class="auth-switch">
                    Already have an account? <a href="#" id="show-login">Sign In</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-top">
                <div class="user-info">
                    <h2>Hello, <span id="user-name">Guest</span>!</h2>
                    <div class="user-location">üìç Your Location</div>
                </div>
                <button id="logout-btn" class="logout-btn">Logout</button>
            </div>
            
            <div class="search-box">
                <input type="text" id="search-input" class="search-input" placeholder="Search for services...">
                <button id="voice-btn" class="voice-btn">üé§</button>
            </div>
        </header>

        <!-- Emergency Button -->
        <button id="emergency-btn" class="emergency-btn">üö® Emergency Help</button>

        <!-- Content -->
        <div class="content">
            <!-- Quick Actions -->
            <section>
                <h3 class="section-title">Quick Actions</h3>
                <div class="quick-actions">
                    <div class="quick-action" data-action="ride">
                        <div class="quick-action-icon">üöó</div>
                        <div>Book Ride</div>
                    </div>
                    <div class="quick-action" data-action="food">
                        <div class="quick-action-icon">üçî</div>
                        <div>Order Food</div>
                    </div>
                    <div class="quick-action" data-action="emergency">
                        <div class="quick-action-icon">üö®</div>
                        <div>Emergency</div>
                    </div>
                    <div class="quick-action" data-action="wallet">
                        <div class="quick-action-icon">üí≥</div>
                        <div>Wallet</div>
                    </div>
                </div>
            </section>

            <!-- Services -->
            <section>
                <h3 class="section-title">All Services</h3>
                <div class="services" id="services">
                    <!-- Services loaded by JavaScript -->
                </div>
            </section>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </button>
            <button class="nav-item">
                <div class="nav-icon">üõ†Ô∏è</div>
                <div class="nav-label">Services</div>
            </button>
            <button class="nav-item">
                <div class="nav-icon">üìã</div>
                <div class="nav-label">Bookings</div>
            </button>
            <button class="nav-item">
                <div class="nav-icon">üí¨</div>
                <div class="nav-label">Chat</div>
            </button>
            <button class="nav-item">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">Profile</div>
            </button>
        </nav>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <div class="modal-header">
                <div id="modal-icon" class="modal-icon">üöó</div>
                <div>
                    <h3 id="modal-title">Book Service</h3>
                    <p id="modal-subtitle">Fill in the details</p>
                </div>
            </div>

            <!-- Booking Type Selection -->
            <div class="booking-type-selector">
                <div class="booking-type-btn active" data-type="instant">
                    <div class="booking-type-icon">‚ö°</div>
                    <div class="booking-type-title">Instant</div>
                    <div class="booking-type-desc">Book now</div>
                </div>
                <div class="booking-type-btn" data-type="scheduled">
                    <div class="booking-type-icon">üìÖ</div>
                    <div class="booking-type-title">Schedule</div>
                    <div class="booking-type-desc">Book for later</div>
                </div>
            </div>
            
            <form id="booking-form">
                <!-- Transport-specific fields -->
                <div id="transport-fields" class="hidden">
                    <div class="location-inputs">
                        <div class="location-input-group">
                            <span class="location-icon">üìç</span>
                            <input type="text" class="input location-input" placeholder="Pickup location" required>
                        </div>
                        <div class="location-input-group">
                            <span class="location-icon">üéØ</span>
                            <input type="text" class="input location-input" placeholder="Destination" required>
                        </div>
                    </div>

                    <div id="price-estimate" class="price-estimate">
                        <div class="price-range">$15 - $25</div>
                        <div class="price-note">Estimated fare ‚Ä¢ 5-10 min away</div>
                    </div>
                </div>

                <!-- General service fields -->
                <div id="general-fields">
                    <div id="datetime-group" class="form-group hidden">
                        <label class="form-label">Date & Time</label>
                        <input type="datetime-local" id="datetime-input" class="input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Service Address</label>
                        <input type="text" id="address-input" class="input" placeholder="Enter address" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Additional Notes</label>
                        <textarea id="notes-input" class="textarea" placeholder="Any special instructions..."></textarea>
                    </div>
                </div>
                
                <button type="submit" id="submit-btn" class="btn btn-primary">Book Now</button>
            </form>
        </div>
    </div>

    <script>
        // App State
        let currentUser = null;
        let isAuthenticated = false;
        let currentService = null;
        let bookingType = 'instant';

        // Services Data
        const services = [
            { 
                id: 1, 
                name: 'Ride & Moving', 
                icon: 'üöó', 
                description: 'Taxi, delivery, moving', 
                price: 15,
                type: 'transport',
                hasInstant: true,
                hasScheduled: true
            },
            { 
                id: 2, 
                name: 'Personal Care', 
                icon: 'üíÖ', 
                description: 'Hair, massage, beauty', 
                price: 30,
                type: 'service',
                hasInstant: false,
                hasScheduled: true
            },
            { 
                id: 3, 
                name: 'Tech Services', 
                icon: 'üîß', 
                description: 'Phone, computer repair', 
                price: 40,
                type: 'service',
                hasInstant: true,
                hasScheduled: true
            },
            { 
                id: 4, 
                name: 'Construction', 
                icon: 'üèóÔ∏è', 
                description: 'Builders, electricians', 
                price: 80,
                type: 'service',
                hasInstant: false,
                hasScheduled: true
            },
            { 
                id: 5, 
                name: 'Home Services', 
                icon: 'üè†', 
                description: 'Cleaning, gardening', 
                price: 35,
                type: 'service',
                hasInstant: true,
                hasScheduled: true
            },
            { 
                id: 6, 
                name: 'Emergency', 
                icon: 'üö®', 
                description: 'Ambulance, roadside help', 
                price: 100,
                type: 'emergency',
                hasInstant: true,
                hasScheduled: false
            },
            { 
                id: 7, 
                name: 'Food Delivery', 
                icon: 'üçî', 
                description: 'Restaurant delivery', 
                price: 15,
                type: 'transport',
                hasInstant: true,
                hasScheduled: true
            },
            { 
                id: 8, 
                name: 'Others', 
                icon: 'üéâ', 
                description: 'Events, catering', 
                price: 45,
                type: 'service',
                hasInstant: false,
                hasScheduled: true
            }
        ];

        // Initialize App
        function initApp() {
            console.log('üöÄ Initializing ZippUp...');
            
            // Check saved login
            const savedUser = localStorage.getItem('zippup_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isAuthenticated = true;
            }
            
            // Hide splash after 2 seconds
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash-screen').style.display = 'none';
                    
                    if (isAuthenticated) {
                        showMainApp();
                    } else {
                        showAuthScreen();
                    }
                }, 500);
            }, 2000);
            
            setupEventListeners();
            loadServices();
        }

        function showAuthScreen() {
            document.getElementById('auth-screen').style.display = 'flex';
        }

        function showMainApp() {
            document.getElementById('app').style.display = 'block';
            if (currentUser) {
                document.getElementById('user-name').textContent = currentUser.name;
            }
            showNotification('Welcome to ZippUp! üöÄ', 'success');
        }

        function setupEventListeners() {
            // Auth switches
            document.getElementById('show-register').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('register-form').classList.remove('hidden');
            });

            document.getElementById('show-login').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('register-form').classList.add('hidden');
                document.getElementById('login-form').classList.remove('hidden');
            });

            // Auth buttons
            document.getElementById('demo-login-btn').addEventListener('click', () => {
                currentUser = { name: 'Demo User', email: 'demo@zippup.com' };
                isAuthenticated = true;
                localStorage.setItem('zippup_user', JSON.stringify(currentUser));
                
                document.getElementById('auth-screen').style.display = 'none';
                showMainApp();
            });

            document.getElementById('login-btn').addEventListener('click', () => {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                if (!email || !password) {
                    showNotification('Please fill in all fields', 'error');
                    return;
                }
                
                currentUser = { name: email.split('@')[0], email: email };
                isAuthenticated = true;
                localStorage.setItem('zippup_user', JSON.stringify(currentUser));
                
                document.getElementById('auth-screen').style.display = 'none';
                showMainApp();
            });

            document.getElementById('register-btn').addEventListener('click', () => {
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const phone = document.getElementById('register-phone').value;
                const password = document.getElementById('register-password').value;
                
                if (!name || !email || !phone || !password) {
                    showNotification('Please fill in all fields', 'error');
                    return;
                }
                
                currentUser = { name: name, email: email, phone: phone };
                isAuthenticated = true;
                localStorage.setItem('zippup_user', JSON.stringify(currentUser));
                
                document.getElementById('auth-screen').style.display = 'none';
                showMainApp();
                showNotification('Account created successfully! üéâ', 'success');
            });

            // Logout
            document.getElementById('logout-btn').addEventListener('click', () => {
                localStorage.removeItem('zippup_user');
                currentUser = null;
                isAuthenticated = false;
                
                document.getElementById('app').style.display = 'none';
                showAuthScreen();
                showNotification('Logged out successfully', 'info');
            });

            // Emergency button
            document.getElementById('emergency-btn').addEventListener('click', () => {
                showNotification('üö® Emergency alert sent! Help is on the way.', 'error');
            });

            // Voice search
            document.getElementById('voice-btn').addEventListener('click', () => {
                if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.onstart = () => showNotification('üé§ Listening...', 'info');
                    recognition.onresult = (e) => {
                        const transcript = e.results[0][0].transcript;
                        document.getElementById('search-input').value = transcript;
                        showNotification(`Voice search: "${transcript}"`, 'success');
                    };
                    recognition.start();
                } else {
                    showNotification('Voice search not supported', 'error');
                }
            });

            // Quick actions
            document.querySelectorAll('.quick-action').forEach(action => {
                action.addEventListener('click', (e) => {
                    const actionType = e.currentTarget.dataset.action;
                    handleQuickAction(actionType);
                });
            });

            // Search
            document.getElementById('search-input').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                if (query) {
                    const results = services.filter(s => 
                        s.name.toLowerCase().includes(query) || 
                        s.description.toLowerCase().includes(query)
                    );
                    showNotification(`Found ${results.length} services for "${query}"`, 'success');
                }
            });

            // Modal close
            document.querySelector('.close-btn').addEventListener('click', () => {
                document.getElementById('booking-modal').classList.remove('active');
            });

            // Booking type selection
            document.querySelectorAll('.booking-type-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.booking-type-btn').forEach(b => b.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    bookingType = e.currentTarget.dataset.type;
                    updateBookingForm();
                });
            });

            // Booking form
            document.getElementById('booking-form').addEventListener('submit', (e) => {
                e.preventDefault();
                handleBookingSubmit();
            });
        }

        function loadServices() {
            const container = document.getElementById('services');
            container.innerHTML = '';
            
            services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <div class="service-icon">${service.icon}</div>
                    <div class="service-name">${service.name}</div>
                    <div class="service-description">${service.description}</div>
                    <div class="service-price">From $${service.price}</div>
                `;
                
                card.addEventListener('click', () => {
                    openBookingModal(service);
                });
                
                container.appendChild(card);
            });
        }

        function handleQuickAction(action) {
            const actions = {
                ride: () => openBookingModal(services.find(s => s.name.includes('Ride'))),
                food: () => openBookingModal(services.find(s => s.name.includes('Food'))),
                emergency: () => showNotification('üö® Emergency services contacted!', 'error'),
                wallet: () => showNotification('üí≥ Wallet feature coming soon!', 'info')
            };
            
            if (actions[action]) {
                actions[action]();
            }
        }

        function openBookingModal(service) {
            currentService = service;
            
            document.getElementById('modal-icon').textContent = service.icon;
            document.getElementById('modal-title').textContent = `Book ${service.name}`;
            document.getElementById('modal-subtitle').textContent = `Starting from $${service.price}`;
            
            // Setup booking type options
            const instantBtn = document.querySelector('[data-type="instant"]');
            const scheduledBtn = document.querySelector('[data-type="scheduled"]');
            
            if (!service.hasInstant) {
                instantBtn.style.display = 'none';
                scheduledBtn.classList.add('active');
                bookingType = 'scheduled';
            } else if (!service.hasScheduled) {
                scheduledBtn.style.display = 'none';
                instantBtn.classList.add('active');
                bookingType = 'instant';
            } else {
                instantBtn.style.display = 'block';
                scheduledBtn.style.display = 'block';
                instantBtn.classList.add('active');
                scheduledBtn.classList.remove('active');
                bookingType = 'instant';
            }
            
            // Show/hide transport fields
            const transportFields = document.getElementById('transport-fields');
            const generalFields = document.getElementById('general-fields');
            
            if (service.type === 'transport') {
                transportFields.classList.remove('hidden');
                document.getElementById('address-input').style.display = 'none';
                updatePriceEstimate();
            } else {
                transportFields.classList.add('hidden');
                document.getElementById('address-input').style.display = 'block';
            }
            
            updateBookingForm();
            document.getElementById('booking-modal').classList.add('active');
        }

        function updateBookingForm() {
            const datetimeGroup = document.getElementById('datetime-group');
            const submitBtn = document.getElementById('submit-btn');
            
            if (bookingType === 'scheduled') {
                datetimeGroup.classList.remove('hidden');
                datetimeGroup.querySelector('input').required = true;
                submitBtn.textContent = 'Schedule Booking';
            } else {
                datetimeGroup.classList.add('hidden');
                datetimeGroup.querySelector('input').required = false;
                
                if (currentService && currentService.type === 'transport') {
                    submitBtn.textContent = 'Book Ride Now';
                } else if (currentService && currentService.type === 'emergency') {
                    submitBtn.textContent = 'Request Emergency Help';
                } else {
                    submitBtn.textContent = 'Book Now';
                }
            }
        }

        function updatePriceEstimate() {
            // Simulate dynamic pricing like Uber
            const basePrice = currentService ? currentService.price : 15;
            const variation = Math.random() * 10 - 5; // ¬±5 variation
            const minPrice = Math.max(basePrice + variation - 5, basePrice * 0.7);
            const maxPrice = basePrice + variation + 10;
            
            document.querySelector('.price-range').textContent = 
                `$${Math.round(minPrice)} - $${Math.round(maxPrice)}`;
            
            // Random driver availability
            const driverTimes = ['2-5 min', '5-10 min', '3-8 min', '1-4 min'];
            const randomTime = driverTimes[Math.floor(Math.random() * driverTimes.length)];
            
            document.querySelector('.price-note').textContent = 
                `Estimated fare ‚Ä¢ ${randomTime} away`;
        }

        function handleBookingSubmit() {
            const serviceType = currentService ? currentService.type : 'service';
            const serviceName = currentService ? currentService.name : 'Service';
            
            if (bookingType === 'instant') {
                if (serviceType === 'transport') {
                    showNotification('üöó Finding nearby drivers...', 'info');
                    setTimeout(() => {
                        showNotification('Driver found! John is 3 minutes away.', 'success');
                    }, 2000);
                } else if (serviceType === 'emergency') {
                    showNotification('üö® Emergency request sent! Help dispatched.', 'error');
                } else {
                    showNotification(`üìû Connecting you with ${serviceName} providers...`, 'info');
                    setTimeout(() => {
                        showNotification('Provider found! They will contact you shortly.', 'success');
                    }, 1500);
                }
            } else {
                const datetime = document.getElementById('datetime-input').value;
                if (datetime) {
                    const date = new Date(datetime).toLocaleString();
                    showNotification(`üìÖ ${serviceName} scheduled for ${date}`, 'success');
                } else {
                    showNotification('Please select date and time', 'error');
                    return;
                }
            }
            
            document.getElementById('booking-modal').classList.remove('active');
            
            // Reset form
            document.getElementById('booking-form').reset();
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Start app when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
